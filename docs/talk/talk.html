<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <meta name="author" content="Russ Poldrack">
  <title>Reproducibility in cognitive neuroscience: What is the problem?</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-c649079a23236b86ac721a1d1825af53.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="./images/stanford_background.jpg" data-background-opacity="0.5" class="quarto-title-block center">
  <h1 class="title">Reproducibility in cognitive neuroscience: What is the problem?</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Russ Poldrack 
</div>
        <p class="quarto-title-affiliation">
            Stanford University
          </p>
    </div>
</div>

</section>
<section id="section" class="slide level2 centered-bigger">
<h2></h2>
<p>A search for “fMRI” for FY2024 NIH grants finds:</p>
<p>1816 matching grants</p>
<p>$941M total costs</p>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<p><img data-src="./images/nih_wordcloud.png" class="absolute" style="top: 0%; left: 15%; height: 80%; "></p>
</section>
<section id="section-2" class="slide level2 centered-bigger">
<h2></h2>
<p>What is the brain dysfunction in major depression?</p>
<p>Meta-analysis of 99 published studies</p>
<p><img data-src="./images/muller_2017_figure2.png" class="absolute" style="top: 20%; left: 10%; height: 75%; "></p>
<div class="absolute" style="font-size: 0.8em; text-align: left;top: 95%; left: 0%; ">
<p>Muller et al, 2017, <em>JAMA Psychiatry</em></p>
</div>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<p><img data-src="./images/muller_title.png" class="absolute" style="top: 10%; left: 00%; height: 40%; "></p>
<p><img data-src="./images/muller_abstract.png" class="absolute" style="top: 50%; left: 00%; height: 40%; "></p>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<p><img data-src="./images/nih_headline_suicide.png" class="absolute" style="top: 10%; left: 00%; height: 80%; "></p>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<p><img data-src="./images/nih_headline_suicide.png" class="absolute" style="top: 10%; left: 00%; height: 80%; "></p>
<p><img data-src="./images/suicide_pattern.png" class="absolute" style="top: 30%; left: 50%; height: 60%; "></p>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<p><img data-src="./images/cmu_press_release.png" class="absolute" style="top: 00%; left: 20%; height: 90%; "></p>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<p><img data-src="./images/just_retraction.png" class="absolute" style="top: 00%; left: 0%; width: 100%; "></p>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<p><img data-src="./images/ha_culkin.jpg" class="absolute" style="top: 00%; left: 30%; height: 60%; "></p>
<div class="absolute" style="font-size: 1.5em; text-align: center;top: 70%; left: 22%; ">
<p>We seem to have created quite a mess.</p>
<p>How can we fix it?</p>
</div>
</section>
<section id="section-9" class="slide level2" data-background-image="images/sunlight_disinfectant.jpg" data-background-opacity=".35">
<h2></h2>
<div class="absolute" style="font-size: 2em; text-align: center;top: 40%; left: 8%; ">
<p>“Sunlight is said to be the best disinfectant”</p>
<p>(Louis Brandeis)</p>
</div>
</section>
<section id="towards-an-ecosystem-for-open-and-reproducible-neuroscience" class="slide level2">
<h2>Towards an ecosystem for open and reproducible neuroscience</h2>
<p><img data-src="images/openneuro_landing.png" class="absolute" style="top: 20%; left: 3%; width: 45%; "></p>
<p><img data-src="images/nipreps.jpg" class="absolute" style="top: 20%; left: 50%; width: 50%; "></p>
</section>
<section id="designing-a-more-reproducible-scientific-enterprise" class="slide level2">
<h2>Designing a more reproducible scientific enterprise</h2>
<p><img data-src="images/papercutter.png" class="absolute" style="top: 20%; left: 0%; width: 45%; "></p>
</section>
<section id="designing-a-more-reproducible-scientific-enterprise-1" class="slide level2">
<h2>Designing a more reproducible scientific enterprise</h2>
<p><img data-src="images/papercutter.png" class="absolute" style="top: 20%; left: 0%; width: 45%; "></p>
<p><img data-src="images/norman_cover.png" class="absolute" style="top: 20%; left: 60%; width: 30%; "></p>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<p><img data-src="images/fooling_ourselves.png" class="absolute" style="top: 00%; left: 20%; height: 80%; "></p>
<div class="absolute" style="font-size: 1.2em; text-align: center;top: 85%; left: 23%; ">
<p>82 | NATURE | VOL 526 | 8 OCTOBER 2015</p>
</div>
</section>
<section id="improving-the-choice-architecture-of-science" class="slide level2">
<h2>Improving the choice architecture of science</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Choice architecture
<ul>
<li>particular set of features that drive people toward or away from particular choices</li>
</ul></li>
<li>Nudges
<ul>
<li>Improving incentives</li>
<li>Using the power of defaults</li>
<li>Providing feedback</li>
<li>Expecting and prevent errors</li>
</ul></li>
</ul>
</div></div>
<p><img data-src="images/nudge.png" class="absolute" style="top: 10%; left: 60%; height: 70%; "></p>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<p><img data-src="images/ioannidis_title.png" class="absolute" style="top: 00%; left: 0%; width: 100%; "> <img data-src="images/ioannidis_date.png" class="absolute" style="top: 40%; left: 0%; width: 100%; "></p>
<div class="absolute" style="font-size: 1.2em; text-align: left;top: 55%; left: 0%; ">
<ul>
<li>The smaller the studies conducted in a scientific field, the less likely the research findings are to be true.</li>
</ul>
</div>
</section>
<section id="neuroscience-research-is-badly-underpowered" class="slide level2">
<h2>Neuroscience research is badly underpowered</h2>
<p><img data-src="images/button_title.png" class="absolute" style="top: 20%; left: 0%; width: 40%; "> <img data-src="images/button_journal.png" class="absolute" style="top: 45%; left: 5%; width: 30%; "> <img data-src="images/button_figure.png" class="absolute" style="top: 55%; left: 0%; width: 45%; "></p>
<p><img data-src="images/dumas_title.png" class="absolute" style="top: 10%; left: 55%; height: 35%; "> <img data-src="images/dumas_figure.png" class="absolute" style="top: 50%; left: 50%; height: 50%; "></p>
</section>
<section id="low-power---unreliable-science" class="slide level2">
<h2>Low power -&gt; unreliable science</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Positive Predictive Value (PPV): The probability that a positive result is true</p>
</div><div class="column" style="width:50%;">
<p>Winner’s Curse: overestimation of effect sizes for significant results</p>
</div></div>
<p><img data-src="images/ppv_formula.png" class="absolute" style="top: 20%; left: 00%; width: 50%; "></p>
<p><img data-src="images/ppv_by_power.png" class="absolute" style="top: 35%; left: 00%; width: 40%; "></p>
<p><img data-src="images/winners_curse.png" class="absolute" style="top: 30%; left: 50%; width: 40%; "></p>
<div class="absolute" style="text-align: center;top: 90%; left: 38%; ">
<p>Button et al, 2013</p>
</div>
</section>
<section id="small-samples-high-instability-of-statistical-estimates" class="slide level2">
<h2>Small samples = high instability of statistical estimates</h2>
<p><img data-src="images/schonbrodt.png" class="absolute" style="top: 15%; left: 18%; height: 70%; "></p>
<div class="absolute" style="text-align: center;top: 90%; left: 38%; ">
<p>Schonbrodt &amp; Perugini, 2013</p>
</div>
</section>
<section id="section-12" class="slide level2">
<h2></h2>
<p><img data-src="images/marek.png" class="absolute" style="top: 0%; left: 17%; height: 85%; "></p>
<div class="absolute" style="text-align: center;top: 90%; left: 38%; ">
<p>Marek et al., 2022</p>
</div>
</section>
<section id="small-samples-publication-bias-the-case-of-candidate-genes" class="slide level2">
<h2>Small samples + publication bias: the case of candidate genes</h2>
<p><img data-src="images/molendijk_title.png" class="absolute" style="top: 10%; left: 0%; height: 20%; "></p>
<p><img data-src="images/molendijk_figure.png" class="absolute" style="top: 30%; left: 30%; height: 60%; "></p>
</section>
<section id="candidate-gene-associations-fail-in-well-powered-gwas" class="slide level2">
<h2>Candidate gene associations fail in well-powered GWAS</h2>
<p><img data-src="images/stein_plot.png" class="absolute" style="top: 20%; left: 60%; width: 35%; "></p>
<p><img data-src="images/stein_title.png" class="absolute" style="top: 10%; left: 0%; width: 80%; "></p>
<div class="absolute" style="text-align: left;top: 25%; left: 1%; ">
<p>Jason stein et al.&nbsp;for the ENIGMA Consortium</p>
</div>
<p><img data-src="images/stein_journal.png" class="absolute" style="top: 32%; left: 1%; width: 40%; "></p>
<div class="absolute" style="font-size: 1.25em; text-align: left;top: 40%; left: 1%; width: 50%; ">
<p>“In general, previously identified poly­morphisms associated with hippocampal volume showed little association in our meta­-analysis (BDNF, TOMM40, CLU, PICALM, ZNF804A, COMT, DISC1, NRG1, DTNBP1), nor did SNPs previously associated with schizophrenia or bipolar disorder”</p>
</div>
</section>
<section id="how-well-powered-are-fmri-studies" class="slide level2">
<h2>How well powered are fMRI studies?</h2>
<p><img data-src="images/Figure1_2023.png" class="absolute" style="top: 10%; left: 5%; width: 80%; "></p>
<div class="absolute" style="text-align: left;top: 75%; left: 0%; ">
<ul>
<li>Median study in 2024 (n=36/group) was powered to find a single 200 voxel activation with d~0.67</li>
<li>Is that plausible?</li>
</ul>
</div>
<div class="absolute" style="text-align: center;top: 90%; left: 0%; ">
<p>Updated from Poldrack et al., 2017</p>
</div>
</section>
<section id="estimating-realistic-effect-sizes" class="slide level2">
<h2>Estimating realistic effect sizes</h2>
<p><img data-src="images/effect_size_pt1.png" class="absolute" style="top: 15%; left: 0%; height: 80%; "></p>
</section>
<section id="estimating-realistic-effect-sizes-1" class="slide level2">
<h2>Estimating realistic effect sizes</h2>
<p><img data-src="images/effect_size_pt1.png" class="absolute" style="top: 15%; left: 0%; height: 80%; "></p>
<p><img data-src="images/effect_size_pt2.png" class="absolute" style="top: 15%; left: 45%; height: 25%; "></p>
</section>
<section id="estimating-realistic-effect-sizes-2" class="slide level2">
<h2>Estimating realistic effect sizes</h2>
<p><img data-src="images/effect_size_pt1.png" class="absolute" style="top: 15%; left: 0%; height: 80%; "></p>
<p><img data-src="images/effect_size_pt2.png" class="absolute" style="top: 15%; left: 45%; height: 25%; "></p>
<p><img data-src="images/effect_size_pt3.png" class="absolute" style="top: 55%; left: 45%; height: 35%; "></p>
</section>
<section id="estimating-realistic-effect-sizes-3" class="slide level2">
<h2>Estimating realistic effect sizes</h2>
<p><img data-src="images/effect_size_arrows.png" class="absolute" style="top: 38%; left: 45%; height: 20%; "></p>
<p><img data-src="images/effect_size_pt1.png" class="absolute" style="top: 15%; left: 0%; height: 80%; "></p>
<p><img data-src="images/effect_size_pt2.png" class="absolute" style="top: 15%; left: 45%; height: 25%; "></p>
<p><img data-src="images/effect_size_pt3.png" class="absolute" style="top: 55%; left: 45%; height: 35%; "></p>
<div class="absolute" style="font-size: 1.3em; text-align: center;top: 40%; left: 75%; width: 15%; ">
<p>Unbiased effect size estimate</p>
</div>
</section>
<section id="what-are-realistic-effect-sizes-for-fmri" class="slide level2">
<h2>What are realistic effect sizes for fMRI?</h2>
<p><img data-src="images/effect_size_plot.png" class="absolute" style="top: 10%; left: 5%; height: 75%; "></p>
<div class="absolute" style="text-align: center;top: 90%; left: 0%; ">
<p>Poldrack et al., 2017, <em>Nature Reviews Neuroscience</em></p>
</div>
</section>
<section id="depression-studies-from-muller-et-al." class="slide level2">
<h2>Depression studies from Muller et al.</h2>
<p><img data-src="images/muller_n_by_year_sufficientN.png" class="absolute" style="top: 10%; left: 0%; width: 50%; "></p>
<div class="absolute" style="text-align: left;top: 17%; left: 50%; ">
<p><strong>Authors must collect at last 20 observations per cell or else provide a compelling cost-of-data-collection justification.</strong> This requirement offers extra protection for the first requirement. Samples smaller than 20 per cell are simply not powerful enough to detect most effects, and so there is usually no good reason to decide in advance to collect such a small number of observations. Smaller samples, it follows, are much more likely to reflect interim data analysis and a flexible termination rule (Simmons et al., 2011)</p>
</div>
</section>
<section id="small-samples---variable-estimates-of-predictive-accuracy" class="slide level2">
<h2>Small samples -&gt; variable estimates of predictive accuracy</h2>
<p><img data-src="images/varoquaux_variability.png" class="absolute" style="top: 10%; left: 12%; height: 75%; "></p>
<div class="absolute" style="text-align: left;top: 90%; left: 0%; ">
<p>Varoquaux, 2018</p>
</div>
</section>
<section id="small-samples-publication-bias---inflated-accuracy-estimates" class="slide level2">
<h2>Small samples + publication bias -&gt; inflated accuracy estimates</h2>
<p><img data-src="images/varoquaux_decline.png" class="absolute" style="top: 10%; left: 12%; height: 75%; "></p>
<div class="absolute" style="text-align: left;top: 90%; left: 0%; ">
<p>Varoquaux, 2018</p>
</div>
</section>
<section id="doing-well-powered-science-as-a-trainee" class="slide level2">
<h2>Doing well-powered science as a trainee</h2>
<p><img data-src="images/costs_title.png" class="absolute" style="top: 10%; left: 0%; height: 35%; "></p>
<div class="absolute" style="text-align: left;top: 47%; left: 0%; ">
<ul>
<li>Underpowered science is futile, but many ECRs don’t have resources to do sufficiently powered studies</li>
<li>“if you can’t answer the question you love, love the question you can” (Kanwisher, 2017)</li>
<li>Pivots:
<ul>
<li>Collaborate</li>
<li>Use shared data</li>
<li>Focus on theory/computational modeling</li>
</ul></li>
</ul>
</div>
</section>
<section id="a-golden-age-of-data-sharing" class="slide level2">
<h2>A golden age of data sharing</h2>
<p><img data-src="images/data_sharing.png" class="absolute" style="top: 10%; left: 0%; width: 100%; "></p>
</section>
<section id="section-13" class="slide level2">
<h2></h2>
<p><img data-src="images/ioannidis_title.png" class="absolute" style="top: 00%; left: 0%; width: 100%; "> <img data-src="images/ioannidis_date.png" class="absolute" style="top: 40%; left: 0%; width: 100%; "></p>
<div class="absolute" style="font-size: 1.2em; text-align: left;top: 55%; left: 0%; ">
<ul>
<li>The greater the flexibility in designs, definitions, outcomes, and analytical modes in a scientific field, the less likely the research findings are to be true.</li>
</ul>
</div>
</section>
<section id="section-14" class="slide level2">
<h2></h2>
<p><img data-src="images/processing_options.png" class="absolute" style="top: 0%; left: 15%; height: 87%; "></p>
<div class="absolute" style="text-align: left;top: 90%; left: 35%; ">
<p>Poldrack et al., 2017</p>
</div>
</section>
<section id="section-15" class="slide level2">
<h2></h2>
<p><img data-src="images/carp_secret_title.png" class="absolute" style="top: 0%; left: 0%; height: 15%; "> <img data-src="images/carp_secret_journal.png" class="absolute" style="top: 15%; left: 0%; height: 5%; "> <img data-src="images/carp_secret_plots.png" class="absolute" style="top: 20%; left: 5%; width: 85%; "></p>
<div class="absolute" style="text-align: center;top: 80%; left: 0%; width: 100%; ">
<p>“data collection and analysis methods were highly flexible across studies, with nearly as many unique analysis pipelines as there were studies in the sample [241].”</p>
</div>
</section>
<section id="section-16" class="slide level2">
<h2></h2>
<p><img data-src="images/carp_variability_title.png" class="absolute" style="top: 0%; left: 0%; height: 25%; "> <img data-src="images/carp_variability_result.png" class="absolute" style="top: 30%; left: 5%; width: 85%; "></p>
</section>
<section id="machine-learning-can-make-it-worse" class="slide level2">
<h2>Machine learning can make it worse</h2>
<p><img data-src="images/skocik_title.png" class="absolute" style="top: 10%; left: 0%; height: 25%; "> <img data-src="images/skocik_plots.png" class="absolute" style="top: 40%; left: 50%; width: 50%; "></p>
<div class="absolute" style="text-align: left;top: 40%; left: 0%; width: 50%; ">
<p>“In this article, we use Support Vector Machine (SVM) classifiers, and genetic algorithms to demonstrate the ease by which overfitting can occur, despite the use of cross validation. We demonstrate that comparable and non-generalizable results can be obtained on informative and non-informative (i.e.&nbsp;random) data by iteratively modifying hyperparameters in seemingly innocuous ways.”</p>
</div>
</section>
<section id="its-not-just-fmri" class="slide level2">
<h2>It’s not just fMRI</h2>
<p><img data-src="images/luck_title.png" class="absolute" style="top: 10%; left: 0%; height: 35%; "> <img data-src="images/luck_names.png" class="absolute" style="top: 45%; left: 0%; height: 5%; "></p>
<div class="absolute" style="text-align: left;top: 50%; left: 0%; width: 100%; ">
<p>The purpose of this paper is to demonstrate how common and seemingly innocuous methods for quantifying and analyzing ERP effects can lead to very high rates of significant but bogus effects, with the likelihood of obtaining at least one such bogus effect exceeding 50% in many experiments.</p>
</div>
</section>
<section id="improving-reproducibility-through-pre-registration" class="slide level2">
<h2>Improving reproducibility through pre-registration</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Register analysis plan prior to accessing data
<ul>
<li>Preferably with code based on analysis of simulated data</li>
</ul></li>
<li>This does not prevent exploratory analysis
<ul>
<li>But planned and exploratory analyses should be clearly delineated in the paper</li>
</ul></li>
<li>If the preregistration commits you to something that you learn is bad, you can always deviate
<ul>
<li>as long as you are explicit in the paper</li>
</ul></li>
</ul>
</div></div>
<p><img data-src="images/mriqc_prereg.png" class="absolute" style="top: 15%; left: 55%; width: 45%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>http://www.russpoldrack.org/2016/09/why-preregistration-no-longer-makes-me.html</p>
</div>
</section>
<section id="section-17" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>The requirement for clinical trial registration was associated with many more null effects</li>
<li>This is a “cost” under the current incentives to publish</li>
</ul>
</div></div>
<p><img data-src="images/kaplan_irvin.png" class="absolute" style="top: 0%; left: 40%; height: 85%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Kaplan &amp; Irvin, 2015</p>
</div>
</section>
<section id="pre-registering-neuroimaging-studies-is-hard" class="slide level2">
<h2>Pre-registering neuroimaging studies is hard!</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>Specify as much as possible
<ul>
<li>How will sample size be determined?</li>
<li>Inclusion/exclusion criteria</li>
<li>Primary hypotheses to be tested</li>
<li>Anatomical regions of interest</li>
<li>Analysis plan
<ul>
<li>Preferably with code tested on existing or simulated data</li>
</ul></li>
</ul></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="images/fmri-prereg.png" class="absolute" style="top: 15%; left: 40%&quot;; height: 85%; "></p>
</div></div>
<div class="absolute" style="text-align: center;top: 70%; left: 55%; ">
<p>https://prereg-psych.org/create/</p>
</div>
</section>
<section id="section-18" class="slide level2">
<h2></h2>
<div class="absolute" style="font-size: 1.5em; text-align: center;top: 30%; width: 100%; ">
<p>Pre-registration prevents p-hacking but does not eliminate analytic variability<br>
<br>
How variable are neuroimaging analysis workflows in the wild?<br>
<br>
What is the effect on scientific inferences?</p>
</div>
</section>
<section id="section-19" class="slide level2">
<h2></h2>
<p><img data-src="images/narps_group.png" class="absolute" style="top: 0%; left: 10%; height: 90%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="data-collection-mixed-gambles-task" class="slide level2">
<h2>Data collection: Mixed gambles task</h2>
<ul>
<li>Functional MRI data for 108 subjects collected at Tel Aviv University</li>
</ul>
<p><img data-src="images/narps_task.png" class="absolute" style="top: 20%; left: 10%; height: 70%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="study-recruitment" class="slide level2">
<h2>Study recruitment</h2>
<ul>
<li>Analysis teams recruited via social media and conferences
<ul>
<li>Up to 3 people each</li>
<li>Signed non-disclosure agreement</li>
<li>Offered co-authorship on initial paper</li>
</ul></li>
<li>Raw dataset (~400GB) distributed to 82 teams via Globus</li>
<li>Teams given ~3 months to provide Y/N answers to 9 hypothesis tests:
<ul>
<li>Is there significant activation in <brain area=""> for <feature of="" experimental="" design="">?</feature></brain></li>
</ul></li>
<li>Using their standard analysis workflow
<ul>
<li>Only restriction was that analysis should include whole brain</li>
</ul></li>
</ul>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="results-collection" class="slide level2">
<h2>Results collection</h2>
<ul>
<li>Received final results from 70 teams</li>
<li>Teams reported their yes/no decisions for each hypothesis
<ul>
<li>Also uploaded the whole-brain statistical maps before and after thresholding</li>
</ul></li>
</ul>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="how-variable-are-workflows-in-the-wild" class="slide level2">
<h2>How variable are workflows in the wild?</h2>
<p><img data-src="images/cobidas_title.png" class="absolute" style="top: 20%; left: 10%; width: 70%; "></p>
<div class="absolute" style="text-align: center;top: 55%; width: 100%; ">
<ul>
<li>Teams provided a detailed written description of analysis workflows</li>
<li>No 2 teams used an identical workflow</li>
<li>Even with detailed written description it was often impossible to tell exactly what was done!</li>
</ul>
</div>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="what-is-the-effect-of-analytic-variability-on-outcomes" class="slide level2">
<h2>What is the effect of analytic variability on outcomes?</h2>
<p><img data-src="images/narps_outcomes.png" class="absolute" style="top: 10%; left: 20%; height: 60%; "></p>
<div class="absolute" style="top: 75%; ">
<ul>
<li>Across teams there were 33 different patterns of outcomes</li>
<li>For any hypothesis, there are at least 4 workflows that can give a positive result</li>
</ul>
</div>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="variability-of-whole-brain-results" class="slide level2">
<h2>Variability of whole-brain results</h2>
<div class="absolute" style="font-size: 1.4em; text-align: center;top: 15%; width: 100%; ">
<p>Proportion of teams with activity in each voxel</p>
</div>
<p><img data-src="images/narps_wholebrain.png" class="absolute" style="top: 30%; left: 15%; width: 70%; "></p>
<div class="absolute" style="font-size: 1.4em; text-align: center;top: 70%; width: 100%; ">
<p>Maximum overlap for all hypotheses: 76%</p>
</div>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
<!--
##

![](images/narps_table.png){.absolute top="20%" left="0%" width="100%"}

::: {.absolute top=90% width="100%" style="text-align: center;"}
Botvinik-Nezer et al., 2020, *Nature*
:::
-->
</section>
<section id="section-20" class="slide level2">
<h2></h2>
<p><img data-src="images/narps_corrmap1.png" class="absolute" style="top: 0%; left: 0%; height: 90%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="section-21" class="slide level2">
<h2></h2>
<p><img data-src="images/narps_corrmap2.png" class="absolute" style="top: 0%; left: 0%; height: 90%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="meta-analysis-across-groups-shows-reliable-findings" class="slide level2">
<h2>Meta-analysis across groups shows reliable findings</h2>
<p><img data-src="images/narps_meta.png" class="absolute" style="top: 10%; left: 8%; height: 80%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>Botvinik-Nezer et al., 2020, <em>Nature</em></p>
</div>
</section>
<section id="how-to-improve-analytic-reproducibility" class="slide level2">
<h2>How to improve analytic reproducibility</h2>
<p><img data-src="images/elife_multi_analyst.png" class="absolute" style="top: 10%; left: 0%; height: 30%; "> <img data-src="images/blind_analysis.png" class="absolute" style="top: 50%; left: 0%; height: 45%; "> <img data-src="images/simulated_data_gelman.png" class="absolute" style="top: 30%; left: 50%; width: 45%; "></p>
</section>
<section id="multiverse-analysis" class="slide level2">
<h2>Multiverse analysis</h2>
<div class="columns">
<div class="column" style="width:30%;">
<ul>
<li>If the same dataset is analyzed in different ways, do we get the same answer?
<ul>
<li>Previous work shows large effects of different analysis workflows</li>
<li>“Vibration of effects” (Ioannidis)</li>
</ul></li>
</ul>
</div></div>
<p><img data-src="images/steegen.png" class="absolute" style="top: 10%; left: 40%; height: 60%; "></p>
<div class="absolute" style="text-align: center;top: 80%; left: 60%; ">
<p>Steegen et al., 2016</p>
</div>
</section>
<section id="a-multiverse-example-are-there-analytic-choices-that-consistently-improve-test-retest-reliability" class="slide level2">
<h2>A multiverse example: Are there analytic choices that consistently improve test-retest reliability?</h2>
<div class="columns">
<div class="column" style="width:30%;">
<ul>
<li>Test-retest reliability is essential for individual difference analyses</li>
<li>Previous work has shown low but variable reliability</li>
<li>How does this relate to analytic choices?</li>
</ul>
</div></div>
<p><img data-src="images/elliott.png" class="absolute" style="top: 20%; left: 35%; height: 50%; "></p>
<div class="absolute" style="text-align: center;top: 80%; left: 60%; ">
<p>Elliott et al., 2020</p>
</div>
</section>
<section id="multiverse-analysis-of-mid-reliability" class="slide level2">
<h2>Multiverse analysis of MID reliability</h2>
<p><img data-src="images/mid_reliability.png" class="absolute" style="top: 10%; left: 1%; height: 70%; "></p>
<div class="absolute" style="text-align: center;top: 80%; left: 60%; ">
<p>Demidenko et al., 2024</p>
</div>
</section>
<section id="section-22" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:30%;">
<ul>
<li>Tested effects of several analytic choices over 240 pipelines
<ul>
<li>Smoothing</li>
<li>Motion modeling</li>
<li>Model specification</li>
<li>Contrast specification</li>
</ul></li>
<li>Overall, reliability was low
<ul>
<li>But it varied substantially across models and contrasts</li>
</ul></li>
</ul>
</div></div>
<p><img data-src="images/demidenko_multiverse.png" class="absolute" style="top: 5%; left: 40%; height: 80%; "></p>
<div class="absolute" style="text-align: center;top: 80%; left: 20%; ">
<p>Demidenko et al., 2024</p>
</div>
</section>
<section id="section-23" class="slide level2">
<h2></h2>
<div class="absolute" style="font-size: 1.5em; text-align: center;top: 30%; width: 100%; ">
<p>How many of you have written computer code in the course of your research?</p>
</div>
</section>
<section id="section-24" class="slide level2">
<h2></h2>
<div class="absolute" style="font-size: 1.5em; text-align: center;top: 30%; width: 100%; ">
<p>How many of you have been trained in software engineering?</p>
</div>
</section>
<section id="section-25" class="slide level2">
<h2></h2>
<div class="absolute" style="font-size: 1.5em; text-align: center;top: 30%; width: 100%; ">
<p>How many of you have ever written a test for your code?</p>
</div>
</section>
<section id="software-errors-are-a-threat-to-reproducibility" class="slide level2">
<h2>Software errors are a threat to reproducibility</h2>
<p><img data-src="images/chang_abstracts.png" class="absolute" style="top: 20%; left: 15%; height: 80%; "></p>
</section>
<section id="section-26" class="slide level2">
<h2></h2>
<p><img data-src="images/chang_retraction.png" class="absolute" style="top: 0%; left: 10%; height: 100%; "></p>
</section>
<section id="small-errors-can-have-big-effects" class="slide level2">
<h2>Small errors can have big effects</h2>
<div class="absolute" style="font-size: 1.5em;top: 10%; left: 0%; height: 70%; ">
<pre><code># 23-class classification problem

skf=StratifiedKFold(labels,8)

if trainsvm:
    pred=N.zeros(len(labels))
    for train,test in skf:
        clf=LinearSVC()
        clf.fit(data[train],labels[train])
        pred[test]=clf.predict(data[test])</code></pre>
</div>
<div class="absolute" style="font-size: 1.5em;top: 65%; left: 0%; height: 70%; ">
<p><strong>Results: 93% accuracy</strong></p>
</div>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>http://www.russpoldrack.org/2013/02/anatomy-of-coding-error.html</p>
</div>
</section>
<section id="small-errors-can-have-big-effects-1" class="slide level2">
<h2>Small errors can have big effects</h2>
<div class="absolute" style="font-size: 1.5em;top: 10%; left: 0%; height: 70%; ">
<pre><code># 23-class classification problem

skf=StratifiedKFold(labels,8)

if trainsvm:
    pred=N.zeros(len(labels))
    for train,test in skf:
        clf=LinearSVC()
        clf.fit(data[train],labels[train])
        pred[test]=clf.predict(data[test])</code></pre>
</div>
<div class="absolute" style="font-size: 1.5em;top: 65%; left: 0%; height: 70%; ">
<p><strong>Results: 93% accuracy</strong></p>
</div>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>http://www.russpoldrack.org/2013/02/anatomy-of-coding-error.html</p>
</div>
<div class="absolute" style="font-size: 1.5em;top: 47%; left: 65%; ">
<pre><code>data[:,train]
data[:,test]</code></pre>
</div>
<div class="absolute" style="font-size: 1.5em;top: 65%; left: 65%; height: 70%; ">
<p><strong>Results: 53% accuracy</strong></p>
</div>
</section>
<section id="software-errors-hit-home" class="slide level2">
<h2>Software errors hit home</h2>
<p><img data-src="images/error1.png" class="absolute" style="top: 10%; left: 0%; width: 65%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>http://reproducibility.stanford.edu/coding-error-postmortem/</p>
</div>
</section>
<section id="software-errors-hit-home-1" class="slide level2">
<h2>Software errors hit home</h2>
<p><img data-src="images/error2.png" class="absolute" style="top: 10%; left: 0%; width: 67%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>http://reproducibility.stanford.edu/coding-error-postmortem/</p>
</div>
</section>
<section id="software-errors-hit-home-2" class="slide level2">
<h2>Software errors hit home</h2>
<p><img data-src="images/error3.png" class="absolute" style="top: 10%; left: 0%; width: 67%; "></p>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>http://reproducibility.stanford.edu/coding-error-postmortem/</p>
</div>
</section>
<section id="bug-hacking" class="slide level2">
<h2>Bug-hacking</h2>
<p><img data-src="images/bug_hacking.png" class="absolute" style="top: 10%; left: 0%; width: 100%; "></p>
<div class="absolute" style="font-size: 1.25em; text-align: center;top: 85%; width: 100%; ">
<ul>
<li>Bugs that confirm our predictions are less likely to be uncovered than bugs that disconfirm them</li>
</ul>
</div>
</section>
<section id="the-principle-of-assumed-error" class="slide level2">
<h2>The principle of assumed error</h2>
<ul>
<li>Whenever you find a seemingly good result (e.g.&nbsp;one that fits your predictions), assume that it occurred due to an error in your code</li>
<li>Protects from “bug hacking”</li>
</ul>
<div class="absolute" style="text-align: center;top: 90%; width: 100%; ">
<p>http://www.russpoldrack.org/2016/08/the-principle-of-assumed-error.html</p>
</div>
</section>
<section id="coding-for-reproducibility" class="slide level2">
<h2>Coding for reproducibility</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>High quality code should be:
<ul>
<li>Readable</li>
<li>Robust</li>
<li>Modular</li>
<li>Well-tested</li>
</ul></li>
<li>Coding is a craft
<ul>
<li>The only way to improve one’s skills is through consistent and deliberate practice</li>
</ul></li>
</ul>
</div></div>
<p><img data-src="images/software_carpentry.png" class="absolute" style="top: 20%; left: 60%; width: 30%; "></p>
<div class="absolute" style="font-size: 1.3em; text-align: center;top: 55%; left: 55%; ">
<p>https://software-carpentry.org</p>
</div>
</section>
<section id="coding-style" class="slide level2">
<h2>Coding style</h2>
<ul>
<li>“code is read much more often than it is written” so readability counts (G. van Rossum)</li>
<li>Nearly all languages have conventions for coding style
<ul>
<li>Following them makes your code easier for others to understand</li>
<li>“others” includes your future self!</li>
</ul></li>
<li>There are also language-independent principles of software design</li>
</ul>
<p><img data-src="images/coding_books.png" class="absolute" style="top: 50%; left: 0%; width: 100%; "></p>
</section>
<section id="commenting-is-not-a-magic-balm-for-bad-code" class="slide level2">
<h2>Commenting is not a magic balm for bad code</h2>
<ul>
<li>Comments should help the reader to know as much as the writer knows about the code
<ul>
<li>Should express intention when it’s not obvious</li>
</ul></li>
<li>“Clear and expressive code with few comments is far superior to cluttered and complex code with lots of comments” (Robert Martin, Clean Code)</li>
<li>“Don’t comment bad code — rewrite it” (Kernighan &amp; Plaugher)</li>
</ul>
</section>
<section id="code-quality-analysis-and-repair" class="slide level2">
<h2>Code quality analysis and repair</h2>
<ul>
<li>Static analysis (pylint, flake8, etc)
<ul>
<li>Checks for errors and adherence to Python style guidelines</li>
<li>Can be run automatically within editor any time code is saved</li>
</ul></li>
<li>Automated formatting tools can help ensure good code formatting
<ul>
<li>black/blue for Python</li>
</ul></li>
<li>Collaborator: “Fixing the style made your code so much easier to read!”</li>
</ul>
<p><img data-src="images/pylint.png" class="absolute" style="top: 40%; left: 0%; width: 80%; "></p>
</section>
<section id="code-review" class="slide level2">
<h2>Code review</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Linus’s law
<ul>
<li>“given enough eyeballs, all bugs are shallow.”</li>
</ul></li>
<li>Code review as a group is a great way to learn coding skills</li>
<li>AI tools have become very good at code review</li>
</ul>
</div></div>
<p><img data-src="images/petre_title.png" class="absolute" style="top: 0%; left: 55%; width: 40%; "> <img data-src="images/petre_abstract.png" class="absolute" style="top: 26%; left: 55%; height: 60%; "></p>
</section>
<section id="software-testing" class="slide level2">
<h2>Software testing</h2>
<ul>
<li>Smoke tests
<ul>
<li>Does everything run without exploding?</li>
</ul></li>
<li>Sanity checks
<ul>
<li>Are values within reasonable ranges?</li>
</ul></li>
<li>Unit tests
<ul>
<li>Does the function do what it is supposed to do?</li>
</ul></li>
</ul>
<div class="absolute" style="text-align: center;top: 75%; left: 0%; width: 100%; ">
<p>https://github.com/poldrack/pytest_tutorial</p>
</div>
</section>
<section id="section-27" class="slide level2">
<h2></h2>
<p><img data-src="images/plosone_title.png" class="absolute" style="top: 0%; left: 0%; width: 50%; "></p>
<div class="absolute" style="font-size: 1.2em; text-align: left;top: 40%; left: 0%; width: 100%; ">
<p>The dataset included two notable age outliers (reported ages 5 and 32757).</p>
<p>Specifically, the statement on page 9 “age turned out not to correlate with any of the indicator variables” is incorrect. It should read instead “age correlated significantly with 3 latent indicator variables (Vaccinations: .219, p &lt; .0001; Conservatism: .169, p &lt; .001; Conspiracist ideation: -.140, maximum likelihood p &lt; .0001, bootstrapped p = .004), and straddled significance for a fourth (Free Market: .08, p%.05).”</p>
</div>
</section>
<section id="section-28" class="slide level2">
<h2></h2>
<div class="absolute" style="font-size: 1.5em;top: 10%; left: 0%; height: 70%; ">
<pre><code>In [1]: age=32757

In [2]: assert age&gt;12 and age&lt;120
------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input-2-37de876b5fda&gt; in &lt;module&gt;()
----&gt; 1 assert age&gt;12 and age&lt;120

AssertionError:</code></pre>
</div>
</section>
<section id="test-driven-development" class="slide level2">
<h2>Test-driven development</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Write test cases based on the intended behavior of the code</li>
<li>Run tests and continue to modify code until the tests pass</li>
<li>Add tests for any new requirements</li>
</ul>
</div></div>
<p><img data-src="images/TDD-1-640x770.png" class="absolute" style="top: 0%; left: 55%; width: 40%; "></p>
<div class="absolute" style="font-size: 0.8em;top: 90%; left: 55%; ">
<p>https://www.browserstack.com/guide/tdd-vs-bdd-vs-atdd</p>
</div>
</section>
<section id="automated-testing" class="slide level2">
<h2>Automated testing</h2>
<p><img data-src="images/github_actions.png" class="absolute" style="top: 10%; left: 10%; height: 80%; "></p>
</section>
<section id="automated-testing-1" class="slide level2">
<h2>Automated testing</h2>
<p><img data-src="images/github_actions_workflow.png" class="absolute" style="top: 10%; left: 10%; height: 80%; "></p>
</section>
<section id="automated-testing-2" class="slide level2">
<h2>Automated testing</h2>
<p><img data-src="images/github_actions_output.png" class="absolute" style="top: 10%; left: 10%; height: 80%; "></p>
</section>
<section id="section-29" class="slide level2">
<h2></h2>
<p><img data-src="images/bcbs_cover.png" class="absolute" style="top: 0%; left: 15%; height: 60%; "></p>
<div class="absolute" style="text-align: center;top: 75%; left: 0%; width: 100%; ">
<p>https://poldrack.github.io/BetterCodeBetterScience</p>
<p>New testing sections daily this week at https://russpoldrack.substack.com/</p>
</div>
</section>
<section id="reproducibility-vs.-validity" class="slide level2">
<h2>Reproducibility vs.&nbsp;validity</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>Reproducibility does not ensure validity
<ul>
<li>The code could be reproducibly wrong!</li>
</ul></li>
</ul>
</div></div>
<p><img data-src="images/ReliabilityValidity-1.png" class="absolute" style="top: 10%; left: 40%; height: 80%; "></p>
</section>
<section id="code-validation" class="slide level2">
<h2>Code validation</h2>
<ul>
<li>Parameter recovery
<ul>
<li>generate synthetic data with a known answer, and make sure that your code can recover the known answer</li>
<li>Best to do this before ever touching the real data!</li>
</ul></li>
<li>Null/randomization testing
<ul>
<li>Generate data with no effect (either synthetic or via randomization of real data) and make sure that no effect is found</li>
</ul></li>
<li>There are increasingly powerful frameworks for generating simulated data
<ul>
<li>Python: Synthetic Data Vault (https://sdv.dev/SDV/)</li>
</ul></li>
</ul>
</section>
<section id="conclusions" class="slide level2">
<h2>Conclusions</h2>
<ul>
<li>Cognitive neuroscience has a reproducibility problem
<ul>
<li>Likely not very different from other areas of science with complex computational workflows and large datasets</li>
</ul></li>
<li>Statistical power is one key to solving the problem</li>
<li>Software engineering tools can help ensure reproducibility and validity of complex analyses</li>
<li>The tools that you will learn at Neurohackademy will help you do better science!</li>
</ul>
</section>
<section id="section-30" class="slide level2">
<h2></h2>
<p><img data-src="images/poldracklab_acknowledgments.png" class="absolute" style="top: 0%; left: 0%; height: 90%; "></p>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>https://poldrack.github.io/talks-Neurohackademy/</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1920,

        height: 1080,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>